// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.0;

import {
    ExecuteArgs,
    TransferInfo,
    DestinationTransferStatus
} from "../libraries/LibConnextStorage.sol";
import { TokenId } from "../libraries/TokenId.sol";

interface IConnext {
    // ============ BRIDGE ==============

    function xcall(
        uint32 _destination,
        address _to,
        address _asset,
        address _delegate,
        uint256 _amount,
        uint256 _slippage,
        bytes calldata _callData
    ) external payable returns (bytes32);

    function xcall(
        uint32 _destination,
        address _to,
        address _asset,
        address _delegate,
        uint256 _amount,
        uint256 _slippage,
        bytes calldata _callData,
        uint256 _relayerFee
    ) external returns (bytes32);

    function xcallIntoLocal(
        uint32 _destination,
        address _to,
        address _asset,
        address _delegate,
        uint256 _amount,
        uint256 _slippage,
        bytes calldata _callData
    ) external payable returns (bytes32);

    function execute(ExecuteArgs calldata _args) external returns (bytes32 transferId);

    function forceUpdateSlippage(TransferInfo calldata _params, uint256 _slippage) external;

    function forceReceiveLocal(TransferInfo calldata _params) external;

    function bumpTransfer(bytes32 _transferId) external payable;

    function routedTransfers(bytes32 _transferId) external view returns (address[] memory);

    function transferStatus(bytes32 _transferId) external view returns (DestinationTransferStatus);

    function remote(uint32 _domain) external view returns (address);

    function domain() external view returns (uint256);

    function nonce() external view returns (uint256);

    function approvedSequencers(address _sequencer) external view returns (bool);

    function xAppConnectionManager() external view returns (address);

    // ============ ROUTERS ==============

    function LIQUIDITY_FEE_NUMERATOR() external view returns (uint256);

    function LIQUIDITY_FEE_DENOMINATOR() external view returns (uint256);

    function getRouterApproval(address _router) external view returns (bool);

    function getRouterRecipient(address _router) external view returns (address);

    function getRouterOwner(address _router) external view returns (address);

    function getProposedRouterOwner(address _router) external view returns (address);

    function getProposedRouterOwnerTimestamp(address _router) external view returns (uint256);

    function maxRoutersPerTransfer() external view returns (uint256);

    function routerBalances(address _router, address _asset) external view returns (uint256);

    function getRouterApprovalForPortal(address _router) external view returns (bool);

    function initializeRouter(address _owner, address _recipient) external;

    function setRouterRecipient(address _router, address _recipient) external;

    function proposeRouterOwner(address _router, address _proposed) external;

    function acceptProposedRouterOwner(address _router) external;

    function addRouterLiquidityFor(
        uint256 _amount,
        address _local,
        address _router
    ) external payable;

    function addRouterLiquidity(uint256 _amount, address _local) external payable;

    function removeRouterLiquidityFor(
        TokenId memory _canonical,
        uint256 _amount,
        address payable _to,
        address _router
    ) external;

    function removeRouterLiquidity(
        TokenId memory _canonical,
        uint256 _amount,
        address payable _to
    ) external;

    // ============ TOKEN_FACET ==============
    function adoptedToCanonical(address _adopted) external view returns (TokenId memory);

    function approvedAssets(TokenId calldata _canonical) external view returns (bool);

    // ============ Functions added to the min interface by Renzo ==============

    // used by the smart contract to swap tokens
    function swapExact(
        bytes32 canonicalId,
        uint256 amountIn,
        address assetIn,
        address assetOut,
        uint256 minAmountOut,
        uint256 deadline
    ) external payable returns (uint256);

    // Used by the UI to calculate slippage
    function calculateSwap(
        bytes32 canonicalId,
        uint8 tokenIndexFrom,
        uint8 tokenIndexTo,
        uint256 dx
    ) external view returns (uint256);
}
